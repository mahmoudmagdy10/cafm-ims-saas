<div class="modal-header position-relative" *ngIf="itemEdit$ | async as data">
  <h5 class="modal-title">
    <svg
      style="fill: #a1a5b7"
      width="20px"
      height="20px"
      viewBox="0 0 32 32"
      id="icon"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <style>
          .cls-1 {
            fill: none;
          }
        </style>
      </defs>
      <rect x="8" y="14" width="6" height="2" />
      <rect x="8" y="6" width="12" height="2" />
      <rect x="8" y="10" width="12" height="2" />
      <rect x="8" y="24" width="6" height="2" />
      <path
        d="M30,24V22H27.8989a4.9678,4.9678,0,0,0-.7319-1.7529l1.49-1.49-1.414-1.414-1.49,1.49A4.9678,4.9678,0,0,0,24,18.1011V16H22v2.1011a4.9678,4.9678,0,0,0-1.7529.7319l-1.49-1.49-1.414,1.414,1.49,1.49A4.9678,4.9678,0,0,0,18.1011,22H16v2h2.1011a4.9678,4.9678,0,0,0,.7319,1.7529l-1.49,1.49,1.414,1.414,1.49-1.49A4.9678,4.9678,0,0,0,22,27.8989V30h2V27.8989a4.9678,4.9678,0,0,0,1.7529-.7319l1.49,1.49,1.414-1.414-1.49-1.49A4.9678,4.9678,0,0,0,27.8989,24Zm-7,2a3,3,0,1,1,3-3A3.0033,3.0033,0,0,1,23,26Z"
      />
      <path
        d="M14,30H6a2.0021,2.0021,0,0,1-2-2V4A2.0021,2.0021,0,0,1,6,2H22a2.0021,2.0021,0,0,1,2,2V14H22V4H6V28h8Z"
      />
      <rect
        id="_Transparent_Rectangle_"
        data-name="&lt;Transparent Rectangle&gt;"
        class="cls-1"
        width="32"
        height="32"
      />
    </svg>

    {{ "STORES.MODALS.CARD.MODAL_TITLE" | translate }}
    ({{ data.PartName }})
    <span class="mx-2">Location-({{ data.LocationName }})</span>
  </h5>
  <!--begin::Close-->
  <div class="close">
    <i class="fas fa-times close-modal-icon" (click)="Close()"></i>
  </div>
  <!--end::-->
</div>

<!-- begin dialog body -->
<form [formGroup]="cardForm">
  <div
    class="modal-body"
    *ngIf="itemEdit$ | async as item; else loading"
    style="max-height: 80vh; overflow: scroll"
  >
    <!-- صندوق المعلومات اللي فوق التاب -->
    <div
      class="card-informations rounded"
      style="background-color: #fafafb; padding: 1rem"
    >
      <div class="row task-info text-center">
        <!-- الكمية -->
        <div class="col-12 col-sm-6 col-md-4">
          <div
            class="card border p-3 text-center d-flex flex-row justify-content-between align-items-center mb-3"
            style="border-bottom: 3px solid #3c92ca !important"
          >
            <span>
              <svg
                id="eLDsiAq7jcR1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                viewBox="0 0 148 127"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"
                style="width: 40px; height: 40px"
              >
                <g transform="translate(-77.10424-154.183197)">
                  <g transform="translate(0 0.000001)">
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(136.516174 230.342454)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(157.613556 192.214722)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(137.516174 154.183197)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(117.66571 191.842454)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(93.516174 230.342454)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                    <rect
                      width="30"
                      height="30"
                      rx="0"
                      ry="0"
                      transform="translate(177.585693 230.342454)"
                      fill="#8dc4e8"
                      stroke="#085f98"
                    />
                  </g>
                  <path
                    d="M77.10424,159.1832c0-5.000002,8.13254-5.000002,8.13254,0c0,0,0,113.77976,0,113.77976h132c0,0,0-113.77976,0-113.77976.000001-5.000001,8.13254-5.000002,8.13254,0c0,0,0,117.84488,0,117.84488v0v4.06512h-148.2v-4.06512h-.06507c0,0,.06507-117.84488-.00001-117.84488Z"
                    fill="#3c92ca"
                    stroke-width="0"
                  />
                </g>
              </svg>
            </span>
            <span>
              <p class="fs-3 fw-bolder">{{ item.InStockQuantity }}</p>
              <span class="fs-7">
                {{
                  "STORES.MODALS.CARD.INVENTORY_MANAGEMENT.QUANTITY" | translate
                }}
              </span>
            </span>
          </div>
        </div>

        <!-- محجوز -->
        <div class="col-12 col-sm-6 col-md-4">
          <div
            class="card border p-3 text-center d-flex flex-row justify-content-between align-items-center mb-3"
            style="border-bottom: 3px solid #9963f8 !important"
          >
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                version="1.1"
                viewBox="0 0 512 512"
                enable-background="new 0 0 512 512"
                fill="#9963f8"
                style="width: 40px; height: 40px"
              >
                <g>
                  <path
                    d="m180.688,260.688c-6.25,6.25-6.25,16.375 0,22.625l48,48c3.125,3.125 7.218,4.687 11.312,4.687 4.094,0 8.188-1.563 11.313-4.688l80-80c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-68.688,68.688-36.688-36.688c-6.249-6.249-16.374-6.249-22.624,0.001z"
                  />
                  <circle cx="256.002" cy="64" r="16" />
                  <path
                    d="M416,32H311.097C299.994,12.965,279.581,0,256,0s-43.994,12.965-55.097,32H96c-26.469,0-48,21.531-48,48v384   c0,26.469,21.531,48,48,48h320c26.469,0,48-21.531,48-48V80C464,53.531,442.469,32,416,32z M224,64c0-17.648,14.352-32,32-32   s32,14.352,32,32v64h-64V64z M288,160c17.648,0,32-14.352,32-32h48v288H144V128h48c0,17.648,14.352,32,32,32H288z M432,464   c0,8.82-7.18,16-16,16H96c-8.82,0-16-7.18-16-16V80c0-8.82,7.18-16,16-16h96v32h-64c-8.836,0-16,7.164-16,16v320   c0,8.836,7.164,16,16,16h256c8.836,0,16-7.164,16-16V112c0-8.836-7.164-16-16-16h-64V64h96c8.82,0,16,7.18,16,16V464z"
                  />
                </g>
              </svg>
            </span>
            <span>
              <p class="fs-3 fw-bolder">{{ item.ReservedQuantity }}</p>
              <span class="fs-7">
                {{
                  "STORES.MODALS.CARD.INVENTORY_MANAGEMENT.RESERVED" | translate
                }}
              </span>
            </span>
          </div>
        </div>

        <!-- السعر -->
        <div class="col-12 col-sm-6 col-md-4">
          <div
            class="card border p-3 text-center d-flex flex-row justify-content-between align-items-center mb-3"
            style="border-bottom: 3px solid #ffc951 !important"
          >
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                version="1.1"
                id="Layer_1"
                x="0px"
                y="0px"
                viewBox="0 0 512 512"
                style="
                  enable-background: new 0 0 512 512;
                  width: 40px;
                  height: 40px;
                "
                xml:space="preserve"
              >
                <path
                  style="fill: #ffdc64"
                  d="M315.858,67.875V33.67c0-4.722-3.829-8.551-8.551-8.551H50.772c-4.722,0-8.551,3.829-8.551,8.551  v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H33.67  c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205  c0,4.722,3.829,8.551,8.551,8.551h34.205c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568  c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H33.67c-4.722,0-8.551,3.829-8.551,8.551v34.205  c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551h34.205  c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551h256.534c4.722,0,8.551-3.829,8.551-8.551V238.898  c0-4.722-3.829-8.551-8.551-8.551h-34.205c4.722,0,8.551-3.829,8.551-8.551v-34.205c0-4.722-3.829-8.551-8.551-8.551h17.102  c4.722,0,8.551-3.829,8.551-8.551v-34.205c0-4.722-3.829-8.551-8.551-8.551h-17.102c4.722,0,8.551-3.829,8.551-8.551V84.977  c0-4.722-3.829-8.551-8.551-8.551h34.205C312.029,76.426,315.858,72.597,315.858,67.875z"
                />
                <path
                  style="fill: #ffc850"
                  d="M307.307,230.347h-34.205c4.722,0,8.551-3.829,8.551-8.551v-9.694  c-46.139,28.661-76.96,79.65-76.96,137.961c0,57.525,29.977,107.948,75.079,136.818h27.535c4.722,0,8.551-3.829,8.551-8.551V238.898  C315.858,234.175,312.029,230.347,307.307,230.347z"
                />
                <g>
                  <path
                    style="fill: #fff082"
                    d="M264.551,179.04h-17.102c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551   h17.102c4.722,0,8.551,3.829,8.551,8.551v34.205C273.102,175.211,269.274,179.04,264.551,179.04z"
                  />
                  <path
                    style="fill: #fff082"
                    d="M247.449,127.733h-17.102c-4.722,0-8.551-3.829-8.551-8.551V84.977c0-4.722,3.829-8.551,8.551-8.551   h17.102c4.722,0,8.551,3.829,8.551,8.551v34.205C256,123.904,252.171,127.733,247.449,127.733z"
                  />
                  <path
                    style="fill: #fff082"
                    d="M247.449,230.347h-17.102c-4.722,0-8.551-3.829-8.551-8.551v-34.205   c0-4.722,3.829-8.551,8.551-8.551h17.102c4.722,0,8.551,3.829,8.551,8.551v34.205C256,226.518,252.171,230.347,247.449,230.347z"
                  />
                </g>
                <path
                  style="fill: #ffc850"
                  d="M127.733,76.426h34.205c-4.722,0-8.551-3.829-8.551-8.551V33.67c0-4.722,3.829-8.551,8.551-8.551  H50.772c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205  c0,4.722,3.829,8.551,8.551,8.551H33.67c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568  c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551h34.205c-4.722,0-8.551,3.829-8.551,8.551v34.205  c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H33.67  c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551H16.568c-4.722,0-8.551,3.829-8.551,8.551v34.205  c0,4.722,3.829,8.551,8.551,8.551h34.205c-4.722,0-8.551,3.829-8.551,8.551v34.205c0,4.722,3.829,8.551,8.551,8.551h111.165  c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551h-34.205c-4.722,0-8.551-3.829-8.551-8.551v-34.205  c0-4.722,3.829-8.551,8.551-8.551h17.102c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551h-17.102  c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551h34.205c-4.722,0-8.551-3.829-8.551-8.551v-34.205  c0-4.722,3.829-8.551,8.551-8.551h-34.205c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551h17.102  c-4.722,0-8.551-3.829-8.551-8.551v-34.205c0-4.722,3.829-8.551,8.551-8.551h-17.102c-4.722,0-8.551-3.829-8.551-8.551V84.977  C119.182,80.255,123.01,76.426,127.733,76.426z"
                />
                <path
                  style="fill: #fff082"
                  d="M281.653,76.426h-17.102c-4.722,0-8.551-3.829-8.551-8.551V33.67c0-4.722,3.829-8.551,8.551-8.551  h17.102c4.722,0,8.551,3.829,8.551,8.551v34.205C290.205,72.597,286.376,76.426,281.653,76.426z"
                />
                <circle
                  style="fill: #ffdc64"
                  cx="367.165"
                  cy="350.063"
                  r="136.818"
                />
                <circle
                  style="fill: #fff082"
                  cx="367.165"
                  cy="350.063"
                  r="102.614"
                />
                <path
                  d="M367.165,205.228c-24.649,0-47.876,6.196-68.215,17.102h-9.307c0.005-0.179,0.027-0.354,0.027-0.534v-34.205  c0-0.181-0.021-0.356-0.027-0.534h0.561c9.136,0,16.568-7.432,16.568-16.568v-34.205c0-9.136-7.432-16.568-16.568-16.568h-0.561  c0.005-0.179,0.027-0.354,0.027-0.534V84.977c0-0.181-0.021-0.356-0.027-0.534h17.663c9.136,0,16.568-7.432,16.568-16.568V33.67  c0-9.136-7.432-16.568-16.568-16.568H50.772c-9.136,0-16.568,7.432-16.568,16.568v34.205c0,0.181,0.021,0.356,0.027,0.534H16.568  C7.432,68.409,0,75.841,0,84.977v34.205c0,9.136,7.432,16.568,16.568,16.568h0.561c-0.005,0.178-0.027,0.354-0.027,0.534v34.205  c0,0.181,0.021,0.356,0.027,0.534h-0.561C7.432,171.023,0,178.455,0,187.591v34.205c0,9.136,7.432,16.568,16.568,16.568h17.663  c-0.005,0.179-0.027,0.354-0.027,0.534v34.205c0,0.181,0.021,0.356,0.027,0.534H16.568C7.432,273.637,0,281.069,0,290.205v34.205  c0,9.136,7.432,16.568,16.568,16.568h0.561c-0.005,0.178-0.027,0.354-0.027,0.534v34.205c0,0.181,0.021,0.356,0.027,0.534h-0.561  C7.432,376.251,0,383.683,0,392.818v34.205c0,9.136,7.432,16.568,16.568,16.568h17.663c-0.005,0.178-0.027,0.354-0.027,0.534v34.205  c0,9.136,7.432,16.568,16.568,16.568h256.534c5.787,0,10.882-2.988,13.846-7.495c14.462,4.858,29.934,7.495,46.012,7.495  c79.862,0,144.835-64.973,144.835-144.835S447.027,205.228,367.165,205.228z M290.205,135.749c0.295,0,0.534,0.24,0.534,0.534  v34.205c0,0.294-0.239,0.534-0.534,0.534h-17.102H33.67c-0.295,0-0.534-0.241-0.534-0.534v-34.205c0-0.294,0.239-0.534,0.534-0.534  h239.432H290.205z M50.238,33.67c0-0.294,0.239-0.534,0.534-0.534h256.534c0.295,0,0.534,0.241,0.534,0.534v34.205  c0,0.294-0.239,0.534-0.534,0.534h-34.205H50.772c-0.295,0-0.534-0.241-0.534-0.534V33.67z M16.568,119.716  c-0.295,0-0.534-0.241-0.534-0.534V84.977c0-0.294,0.239-0.534,0.534-0.534h34.205h222.33c0.295,0,0.534,0.241,0.534,0.534v34.205  c0,0.294-0.239,0.534-0.534,0.534H33.67H16.568z M16.568,222.33c-0.295,0-0.534-0.241-0.534-0.534v-34.205  c0-0.294,0.239-0.534,0.534-0.534H33.67h239.432c0.295,0,0.534,0.241,0.534,0.534v34.205c0,0.294-0.239,0.534-0.534,0.534H50.772  H16.568z M275.065,238.363c-12.096,9.991-22.539,21.91-30.874,35.273H50.772c-0.295,0-0.534-0.241-0.534-0.534v-34.205  c0-0.294,0.239-0.534,0.534-0.534h222.33H275.065z M16.568,324.944c-0.295,0-0.534-0.241-0.534-0.534v-34.205  c0-0.294,0.239-0.534,0.534-0.534h218.97c-5.104,11.08-8.852,22.909-11.022,35.273H33.67H16.568z M224.708,376.251H33.67  c-0.295,0-0.534-0.241-0.534-0.534v-34.205c0-0.294,0.239-0.534,0.534-0.534h188.953c-0.187,3.006-0.293,6.034-0.293,9.086  C222.33,359.003,223.15,367.754,224.708,376.251z M16.568,427.557c-0.295,0-0.534-0.241-0.534-0.534v-34.205  c0-0.294,0.239-0.534,0.534-0.534h212.046c3.836,12.564,9.336,24.407,16.245,35.273H50.772H16.568z M50.772,478.864  c-0.295,0-0.534-0.239-0.534-0.534v-34.205c0-0.294,0.239-0.534,0.534-0.534H256c0.218,0,0.432-0.016,0.646-0.032  c12.269,14.48,27.32,26.53,44.327,35.306H50.772z M367.165,478.864c-71.022,0-128.802-57.78-128.802-128.802  s57.78-128.802,128.802-128.802s128.802,57.78,128.802,128.802S438.186,478.864,367.165,478.864z"
                />
                <path
                  d="M367.165,239.432c-61.002,0-110.63,49.629-110.63,110.63s49.629,110.63,110.63,110.63s110.63-49.629,110.63-110.63  S428.167,239.432,367.165,239.432z M367.165,444.66c-52.161,0-94.597-42.436-94.597-94.597s42.436-94.597,94.597-94.597  s94.597,42.436,94.597,94.597S419.326,444.66,367.165,444.66z"
                />
                <path
                  d="M393.353,321.203c0,4.427,3.589,8.017,8.017,8.017c4.427,0,8.017-3.589,8.017-8.017c0-15.098-14.492-27.298-34.205-29.93  v-1.068c0-4.427-3.589-8.017-8.017-8.017c-4.427,0-8.017,3.589-8.017,8.017v1.068c-19.713,2.632-34.205,14.832-34.205,29.93  c0,21.354,18.87,29.655,34.205,34.718v36.709c-11.014-2.054-18.171-8.139-18.171-13.706c0-4.427-3.589-8.017-8.017-8.017  c-4.427,0-8.017,3.589-8.017,8.017c0,15.098,14.492,27.298,34.205,29.93v1.068c0,4.427,3.589,8.017,8.017,8.017  c4.427,0,8.017-3.589,8.017-8.017v-1.068c19.713-2.632,34.205-14.832,34.205-29.93c0-21.354-18.87-29.655-34.205-34.718v-36.709  C386.195,309.551,393.353,315.636,393.353,321.203z M340.977,321.203c0-5.567,7.157-11.652,18.171-13.706v31.358  C345.47,333.635,340.977,328.915,340.977,321.203z M393.353,378.923c0,5.567-7.157,11.652-18.171,13.706v-31.358  C388.86,366.49,393.353,371.211,393.353,378.923z"
                />
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
                <g></g>
              </svg>
            </span>
            <span>
              <p class="fs-3 fw-bolder">{{ item.AveragePrice }} {{ cur }}</p>
              <span class="fs-7">
                {{
                  "average_price_display" | translate
                }}
              </span>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- ------------------------------------------- -->
    <p-tabView *ngIf="codes$ | async as codes">
      <p-tabPanel
        header="{{ 'STORES.MODALS.CARD.BASIC_DATA.TAB_TITLE' | translate }}"
        class="px-0"
      >
        <app-basic-informtion
          [cardSparePartForm]="this.cardForm.controls.cardSparePartForm"
        ></app-basic-informtion>
      </p-tabPanel>
      <!-- --------------------------------- -->
      <p-tabPanel
        *ngIf="codes?.PagePermissions?.PartsStorageManagementShow"
        [header]="
          'STORES.MODALS.CARD.INVENTORY_MANAGEMENT.TAB_TITLE' | translate
        "
        class="px-0"
      >
        <app-inventory-managment
          [storeMangmentForm]="this.cardForm.controls.storeMangmentForm"
          [partsStorageManagementEditPermission]="partsStorageManagementEditPermission"
        >
        </app-inventory-managment>
      </p-tabPanel>
      <!-- --------------------------------- -->
      <p-tabPanel
        header="{{ 'STORES.MODALS.CARD.LOGS.TAB_TITLE' | translate }}"
        class="px-0"
      >
        <app-movment-history></app-movment-history>
      </p-tabPanel>
      <!-- --------------------------------- -->
      <p-tabPanel
        *ngIf="codes?.PagePermissions?.PartsToVendors"
        header="{{ 'STORES.MODALS.CARD.VENDORS.TAB_TITLE' | translate }}"
        class="px-0"
      >
        <app-vendors-for-spare-parts></app-vendors-for-spare-parts>
      </p-tabPanel>
      <!-- --------------------------------- -->
      <p-tabPanel
        header="{{ 'STORES.MODALS.CARD.ASSETS.TAB_TITLE' | translate }}"
      >
        <app-assets-for-spare-parts></app-assets-for-spare-parts>
      </p-tabPanel>
      <!-- --------------------------------- -->
      <p-tabPanel
        header="{{ 'STORES.MODALS.CARD.REPORTS.TAB_TITLE' | translate }}"
      >
        <app-reports-spare-parts></app-reports-spare-parts>
      </p-tabPanel>
      <!-- --------------------------------- -->
    </p-tabView>
  </div>
</form>

<!-- <div class="modal-footer position-relative">
  <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
    <span>
      <span> <i class="fa fa-save"></i> </span>
      <span> {{ "GENERAL.SAVE" | translate }} </span>
    </span>
  </button>

  <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal" (click)="Close()">
    <span>
      <span> <i class="fa fa-times" (click)="Close()"></i> </span>
      <span> {{ "GENERAL.CANCEL" | translate }} </span>
    </span>
  </button>

  <i class="fas fa-cogs modal-bg-icon"></i>
</div> -->
<ng-template #loading>loading...</ng-template>
